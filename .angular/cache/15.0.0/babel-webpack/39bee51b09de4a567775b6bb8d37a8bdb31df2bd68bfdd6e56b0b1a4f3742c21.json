{"ast":null,"code":"/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { trace, context, propagation, diag } from '@opentelemetry/api';\nimport { CompositePropagator, W3CBaggagePropagator, W3CTraceContextPropagator, getEnv, merge } from '@opentelemetry/core';\nimport { Resource } from '@opentelemetry/resources';\nimport { Tracer } from '.';\nimport { DEFAULT_CONFIG } from './config';\nimport { MultiSpanProcessor } from './MultiSpanProcessor';\nimport { NoopSpanProcessor } from './export/NoopSpanProcessor';\nimport { BatchSpanProcessor } from './platform';\nexport var ForceFlushState;\n(function (ForceFlushState) {\n  ForceFlushState[ForceFlushState[\"resolved\"] = 0] = \"resolved\";\n  ForceFlushState[ForceFlushState[\"timeout\"] = 1] = \"timeout\";\n  ForceFlushState[ForceFlushState[\"error\"] = 2] = \"error\";\n  ForceFlushState[ForceFlushState[\"unresolved\"] = 3] = \"unresolved\";\n})(ForceFlushState || (ForceFlushState = {}));\n/**\n * This class represents a basic tracer provider which platform libraries can extend\n */\nvar BasicTracerProvider = /** @class */function () {\n  function BasicTracerProvider(config) {\n    if (config === void 0) {\n      config = {};\n    }\n    var _a;\n    this._registeredSpanProcessors = [];\n    this._tracers = new Map();\n    var mergedConfig = merge({}, DEFAULT_CONFIG, config);\n    this.resource = (_a = mergedConfig.resource) !== null && _a !== void 0 ? _a : Resource.empty();\n    this.resource = Resource.default().merge(this.resource);\n    this._config = Object.assign({}, mergedConfig, {\n      resource: this.resource\n    });\n    var defaultExporter = this._buildExporterFromEnv();\n    if (defaultExporter !== undefined) {\n      var batchProcessor = new BatchSpanProcessor(defaultExporter);\n      this.activeSpanProcessor = batchProcessor;\n    } else {\n      this.activeSpanProcessor = new NoopSpanProcessor();\n    }\n  }\n  BasicTracerProvider.prototype.getTracer = function (name, version) {\n    var key = name + \"@\" + (version || '');\n    if (!this._tracers.has(key)) {\n      this._tracers.set(key, new Tracer({\n        name: name,\n        version: version\n      }, this._config, this));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return this._tracers.get(key);\n  };\n  /**\n   * Adds a new {@link SpanProcessor} to this tracer.\n   * @param spanProcessor the new SpanProcessor to be added.\n   */\n  BasicTracerProvider.prototype.addSpanProcessor = function (spanProcessor) {\n    if (this._registeredSpanProcessors.length === 0) {\n      // since we might have enabled by default a batchProcessor, we disable it\n      // before adding the new one\n      this.activeSpanProcessor.shutdown().catch(function (err) {\n        return diag.error('Error while trying to shutdown current span processor', err);\n      });\n    }\n    this._registeredSpanProcessors.push(spanProcessor);\n    this.activeSpanProcessor = new MultiSpanProcessor(this._registeredSpanProcessors);\n  };\n  BasicTracerProvider.prototype.getActiveSpanProcessor = function () {\n    return this.activeSpanProcessor;\n  };\n  /**\n   * Register this TracerProvider for use with the OpenTelemetry API.\n   * Undefined values may be replaced with defaults, and\n   * null values will be skipped.\n   *\n   * @param config Configuration object for SDK registration\n   */\n  BasicTracerProvider.prototype.register = function (config) {\n    if (config === void 0) {\n      config = {};\n    }\n    trace.setGlobalTracerProvider(this);\n    if (config.propagator === undefined) {\n      config.propagator = this._buildPropagatorFromEnv();\n    }\n    if (config.contextManager) {\n      context.setGlobalContextManager(config.contextManager);\n    }\n    if (config.propagator) {\n      propagation.setGlobalPropagator(config.propagator);\n    }\n  };\n  BasicTracerProvider.prototype.forceFlush = function () {\n    var timeout = this._config.forceFlushTimeoutMillis;\n    var promises = this._registeredSpanProcessors.map(function (spanProcessor) {\n      return new Promise(function (resolve) {\n        var state;\n        var timeoutInterval = setTimeout(function () {\n          resolve(new Error(\"Span processor did not completed within timeout period of \" + timeout + \" ms\"));\n          state = ForceFlushState.timeout;\n        }, timeout);\n        spanProcessor.forceFlush().then(function () {\n          clearTimeout(timeoutInterval);\n          if (state !== ForceFlushState.timeout) {\n            state = ForceFlushState.resolved;\n            resolve(state);\n          }\n        }).catch(function (error) {\n          clearTimeout(timeoutInterval);\n          state = ForceFlushState.error;\n          resolve(error);\n        });\n      });\n    });\n    return new Promise(function (resolve, reject) {\n      Promise.all(promises).then(function (results) {\n        var errors = results.filter(function (result) {\n          return result !== ForceFlushState.resolved;\n        });\n        if (errors.length > 0) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      }).catch(function (error) {\n        return reject([error]);\n      });\n    });\n  };\n  BasicTracerProvider.prototype.shutdown = function () {\n    return this.activeSpanProcessor.shutdown();\n  };\n  BasicTracerProvider.prototype._getPropagator = function (name) {\n    var _a;\n    return (_a = BasicTracerProvider._registeredPropagators.get(name)) === null || _a === void 0 ? void 0 : _a();\n  };\n  BasicTracerProvider.prototype._getSpanExporter = function (name) {\n    var _a;\n    return (_a = BasicTracerProvider._registeredExporters.get(name)) === null || _a === void 0 ? void 0 : _a();\n  };\n  BasicTracerProvider.prototype._buildPropagatorFromEnv = function () {\n    var _this = this;\n    // per spec, propagators from env must be deduplicated\n    var uniquePropagatorNames = Array.from(new Set(getEnv().OTEL_PROPAGATORS));\n    var propagators = uniquePropagatorNames.map(function (name) {\n      var propagator = _this._getPropagator(name);\n      if (!propagator) {\n        diag.warn(\"Propagator \\\"\" + name + \"\\\" requested through environment variable is unavailable.\");\n      }\n      return propagator;\n    });\n    var validPropagators = propagators.reduce(function (list, item) {\n      if (item) {\n        list.push(item);\n      }\n      return list;\n    }, []);\n    if (validPropagators.length === 0) {\n      return;\n    } else if (uniquePropagatorNames.length === 1) {\n      return validPropagators[0];\n    } else {\n      return new CompositePropagator({\n        propagators: validPropagators\n      });\n    }\n  };\n  BasicTracerProvider.prototype._buildExporterFromEnv = function () {\n    var exporterName = getEnv().OTEL_TRACES_EXPORTER;\n    if (exporterName === 'none') return;\n    var exporter = this._getSpanExporter(exporterName);\n    if (!exporter) {\n      diag.error(\"Exporter \\\"\" + exporterName + \"\\\" requested through environment variable is unavailable.\");\n    }\n    return exporter;\n  };\n  BasicTracerProvider._registeredPropagators = new Map([['tracecontext', function () {\n    return new W3CTraceContextPropagator();\n  }], ['baggage', function () {\n    return new W3CBaggagePropagator();\n  }]]);\n  BasicTracerProvider._registeredExporters = new Map();\n  return BasicTracerProvider;\n}();\nexport { BasicTracerProvider };","map":{"version":3,"names":["trace","context","propagation","diag","CompositePropagator","W3CBaggagePropagator","W3CTraceContextPropagator","getEnv","merge","Resource","Tracer","DEFAULT_CONFIG","MultiSpanProcessor","NoopSpanProcessor","BatchSpanProcessor","ForceFlushState","BasicTracerProvider","config","_a","_registeredSpanProcessors","_tracers","Map","mergedConfig","resource","empty","default","_config","Object","assign","defaultExporter","_buildExporterFromEnv","undefined","batchProcessor","activeSpanProcessor","prototype","getTracer","name","version","key","has","set","get","addSpanProcessor","spanProcessor","length","shutdown","catch","err","error","push","getActiveSpanProcessor","register","setGlobalTracerProvider","propagator","_buildPropagatorFromEnv","contextManager","setGlobalContextManager","setGlobalPropagator","forceFlush","timeout","forceFlushTimeoutMillis","promises","map","Promise","resolve","state","timeoutInterval","setTimeout","Error","then","clearTimeout","resolved","reject","all","results","errors","filter","result","_getPropagator","_registeredPropagators","_getSpanExporter","_registeredExporters","_this","uniquePropagatorNames","Array","from","Set","OTEL_PROPAGATORS","propagators","warn","validPropagators","reduce","list","item","exporterName","OTEL_TRACES_EXPORTER","exporter"],"sources":["/Users/dimitris.finas/node_modules/@opentelemetry/sdk-trace-base/build/esm/BasicTracerProvider.js"],"sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { trace, context, propagation, diag, } from '@opentelemetry/api';\nimport { CompositePropagator, W3CBaggagePropagator, W3CTraceContextPropagator, getEnv, merge, } from '@opentelemetry/core';\nimport { Resource } from '@opentelemetry/resources';\nimport { Tracer } from '.';\nimport { DEFAULT_CONFIG } from './config';\nimport { MultiSpanProcessor } from './MultiSpanProcessor';\nimport { NoopSpanProcessor } from './export/NoopSpanProcessor';\nimport { BatchSpanProcessor } from './platform';\nexport var ForceFlushState;\n(function (ForceFlushState) {\n    ForceFlushState[ForceFlushState[\"resolved\"] = 0] = \"resolved\";\n    ForceFlushState[ForceFlushState[\"timeout\"] = 1] = \"timeout\";\n    ForceFlushState[ForceFlushState[\"error\"] = 2] = \"error\";\n    ForceFlushState[ForceFlushState[\"unresolved\"] = 3] = \"unresolved\";\n})(ForceFlushState || (ForceFlushState = {}));\n/**\n * This class represents a basic tracer provider which platform libraries can extend\n */\nvar BasicTracerProvider = /** @class */ (function () {\n    function BasicTracerProvider(config) {\n        if (config === void 0) { config = {}; }\n        var _a;\n        this._registeredSpanProcessors = [];\n        this._tracers = new Map();\n        var mergedConfig = merge({}, DEFAULT_CONFIG, config);\n        this.resource = (_a = mergedConfig.resource) !== null && _a !== void 0 ? _a : Resource.empty();\n        this.resource = Resource.default().merge(this.resource);\n        this._config = Object.assign({}, mergedConfig, {\n            resource: this.resource,\n        });\n        var defaultExporter = this._buildExporterFromEnv();\n        if (defaultExporter !== undefined) {\n            var batchProcessor = new BatchSpanProcessor(defaultExporter);\n            this.activeSpanProcessor = batchProcessor;\n        }\n        else {\n            this.activeSpanProcessor = new NoopSpanProcessor();\n        }\n    }\n    BasicTracerProvider.prototype.getTracer = function (name, version) {\n        var key = name + \"@\" + (version || '');\n        if (!this._tracers.has(key)) {\n            this._tracers.set(key, new Tracer({ name: name, version: version }, this._config, this));\n        }\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return this._tracers.get(key);\n    };\n    /**\n     * Adds a new {@link SpanProcessor} to this tracer.\n     * @param spanProcessor the new SpanProcessor to be added.\n     */\n    BasicTracerProvider.prototype.addSpanProcessor = function (spanProcessor) {\n        if (this._registeredSpanProcessors.length === 0) {\n            // since we might have enabled by default a batchProcessor, we disable it\n            // before adding the new one\n            this.activeSpanProcessor\n                .shutdown()\n                .catch(function (err) {\n                return diag.error('Error while trying to shutdown current span processor', err);\n            });\n        }\n        this._registeredSpanProcessors.push(spanProcessor);\n        this.activeSpanProcessor = new MultiSpanProcessor(this._registeredSpanProcessors);\n    };\n    BasicTracerProvider.prototype.getActiveSpanProcessor = function () {\n        return this.activeSpanProcessor;\n    };\n    /**\n     * Register this TracerProvider for use with the OpenTelemetry API.\n     * Undefined values may be replaced with defaults, and\n     * null values will be skipped.\n     *\n     * @param config Configuration object for SDK registration\n     */\n    BasicTracerProvider.prototype.register = function (config) {\n        if (config === void 0) { config = {}; }\n        trace.setGlobalTracerProvider(this);\n        if (config.propagator === undefined) {\n            config.propagator = this._buildPropagatorFromEnv();\n        }\n        if (config.contextManager) {\n            context.setGlobalContextManager(config.contextManager);\n        }\n        if (config.propagator) {\n            propagation.setGlobalPropagator(config.propagator);\n        }\n    };\n    BasicTracerProvider.prototype.forceFlush = function () {\n        var timeout = this._config.forceFlushTimeoutMillis;\n        var promises = this._registeredSpanProcessors.map(function (spanProcessor) {\n            return new Promise(function (resolve) {\n                var state;\n                var timeoutInterval = setTimeout(function () {\n                    resolve(new Error(\"Span processor did not completed within timeout period of \" + timeout + \" ms\"));\n                    state = ForceFlushState.timeout;\n                }, timeout);\n                spanProcessor\n                    .forceFlush()\n                    .then(function () {\n                    clearTimeout(timeoutInterval);\n                    if (state !== ForceFlushState.timeout) {\n                        state = ForceFlushState.resolved;\n                        resolve(state);\n                    }\n                })\n                    .catch(function (error) {\n                    clearTimeout(timeoutInterval);\n                    state = ForceFlushState.error;\n                    resolve(error);\n                });\n            });\n        });\n        return new Promise(function (resolve, reject) {\n            Promise.all(promises)\n                .then(function (results) {\n                var errors = results.filter(function (result) { return result !== ForceFlushState.resolved; });\n                if (errors.length > 0) {\n                    reject(errors);\n                }\n                else {\n                    resolve();\n                }\n            })\n                .catch(function (error) { return reject([error]); });\n        });\n    };\n    BasicTracerProvider.prototype.shutdown = function () {\n        return this.activeSpanProcessor.shutdown();\n    };\n    BasicTracerProvider.prototype._getPropagator = function (name) {\n        var _a;\n        return (_a = BasicTracerProvider._registeredPropagators.get(name)) === null || _a === void 0 ? void 0 : _a();\n    };\n    BasicTracerProvider.prototype._getSpanExporter = function (name) {\n        var _a;\n        return (_a = BasicTracerProvider._registeredExporters.get(name)) === null || _a === void 0 ? void 0 : _a();\n    };\n    BasicTracerProvider.prototype._buildPropagatorFromEnv = function () {\n        var _this = this;\n        // per spec, propagators from env must be deduplicated\n        var uniquePropagatorNames = Array.from(new Set(getEnv().OTEL_PROPAGATORS));\n        var propagators = uniquePropagatorNames.map(function (name) {\n            var propagator = _this._getPropagator(name);\n            if (!propagator) {\n                diag.warn(\"Propagator \\\"\" + name + \"\\\" requested through environment variable is unavailable.\");\n            }\n            return propagator;\n        });\n        var validPropagators = propagators.reduce(function (list, item) {\n            if (item) {\n                list.push(item);\n            }\n            return list;\n        }, []);\n        if (validPropagators.length === 0) {\n            return;\n        }\n        else if (uniquePropagatorNames.length === 1) {\n            return validPropagators[0];\n        }\n        else {\n            return new CompositePropagator({\n                propagators: validPropagators,\n            });\n        }\n    };\n    BasicTracerProvider.prototype._buildExporterFromEnv = function () {\n        var exporterName = getEnv().OTEL_TRACES_EXPORTER;\n        if (exporterName === 'none')\n            return;\n        var exporter = this._getSpanExporter(exporterName);\n        if (!exporter) {\n            diag.error(\"Exporter \\\"\" + exporterName + \"\\\" requested through environment variable is unavailable.\");\n        }\n        return exporter;\n    };\n    BasicTracerProvider._registeredPropagators = new Map([\n        ['tracecontext', function () { return new W3CTraceContextPropagator(); }],\n        ['baggage', function () { return new W3CBaggagePropagator(); }],\n    ]);\n    BasicTracerProvider._registeredExporters = new Map();\n    return BasicTracerProvider;\n}());\nexport { BasicTracerProvider };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}