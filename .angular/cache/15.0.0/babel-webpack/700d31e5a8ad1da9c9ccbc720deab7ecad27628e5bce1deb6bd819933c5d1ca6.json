{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateLoadBalancingConfig = exports.getFirstUsableConfig = exports.isLoadBalancerNameRegistered = exports.createLoadBalancer = exports.registerDefaultLoadBalancerType = exports.registerLoadBalancerType = exports.createChildChannelControlHelper = void 0;\n/**\n * Create a child ChannelControlHelper that overrides some methods of the\n * parent while letting others pass through to the parent unmodified. This\n * allows other code to create these children without needing to know about\n * all of the methods to be passed through.\n * @param parent\n * @param overrides\n */\nfunction createChildChannelControlHelper(parent, overrides) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n  return {\n    createSubchannel: (_b = (_a = overrides.createSubchannel) === null || _a === void 0 ? void 0 : _a.bind(overrides)) !== null && _b !== void 0 ? _b : parent.createSubchannel.bind(parent),\n    updateState: (_d = (_c = overrides.updateState) === null || _c === void 0 ? void 0 : _c.bind(overrides)) !== null && _d !== void 0 ? _d : parent.updateState.bind(parent),\n    requestReresolution: (_f = (_e = overrides.requestReresolution) === null || _e === void 0 ? void 0 : _e.bind(overrides)) !== null && _f !== void 0 ? _f : parent.requestReresolution.bind(parent),\n    addChannelzChild: (_h = (_g = overrides.addChannelzChild) === null || _g === void 0 ? void 0 : _g.bind(overrides)) !== null && _h !== void 0 ? _h : parent.addChannelzChild.bind(parent),\n    removeChannelzChild: (_k = (_j = overrides.removeChannelzChild) === null || _j === void 0 ? void 0 : _j.bind(overrides)) !== null && _k !== void 0 ? _k : parent.removeChannelzChild.bind(parent)\n  };\n}\nexports.createChildChannelControlHelper = createChildChannelControlHelper;\nconst registeredLoadBalancerTypes = {};\nlet defaultLoadBalancerType = null;\nfunction registerLoadBalancerType(typeName, loadBalancerType, loadBalancingConfigType) {\n  registeredLoadBalancerTypes[typeName] = {\n    LoadBalancer: loadBalancerType,\n    LoadBalancingConfig: loadBalancingConfigType\n  };\n}\nexports.registerLoadBalancerType = registerLoadBalancerType;\nfunction registerDefaultLoadBalancerType(typeName) {\n  defaultLoadBalancerType = typeName;\n}\nexports.registerDefaultLoadBalancerType = registerDefaultLoadBalancerType;\nfunction createLoadBalancer(config, channelControlHelper) {\n  const typeName = config.getLoadBalancerName();\n  if (typeName in registeredLoadBalancerTypes) {\n    return new registeredLoadBalancerTypes[typeName].LoadBalancer(channelControlHelper);\n  } else {\n    return null;\n  }\n}\nexports.createLoadBalancer = createLoadBalancer;\nfunction isLoadBalancerNameRegistered(typeName) {\n  return typeName in registeredLoadBalancerTypes;\n}\nexports.isLoadBalancerNameRegistered = isLoadBalancerNameRegistered;\nfunction getFirstUsableConfig(configs, fallbackTodefault = false) {\n  for (const config of configs) {\n    if (config.getLoadBalancerName() in registeredLoadBalancerTypes) {\n      return config;\n    }\n  }\n  if (fallbackTodefault) {\n    if (defaultLoadBalancerType) {\n      return new registeredLoadBalancerTypes[defaultLoadBalancerType].LoadBalancingConfig();\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\nexports.getFirstUsableConfig = getFirstUsableConfig;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction validateLoadBalancingConfig(obj) {\n  if (!(obj !== null && typeof obj === 'object')) {\n    throw new Error('Load balancing config must be an object');\n  }\n  const keys = Object.keys(obj);\n  if (keys.length !== 1) {\n    throw new Error('Provided load balancing config has multiple conflicting entries');\n  }\n  const typeName = keys[0];\n  if (typeName in registeredLoadBalancerTypes) {\n    return registeredLoadBalancerTypes[typeName].LoadBalancingConfig.createFromJson(obj[typeName]);\n  } else {\n    throw new Error(`Unrecognized load balancing config name ${typeName}`);\n  }\n}\nexports.validateLoadBalancingConfig = validateLoadBalancingConfig;","map":{"version":3,"names":["Object","defineProperty","exports","value","validateLoadBalancingConfig","getFirstUsableConfig","isLoadBalancerNameRegistered","createLoadBalancer","registerDefaultLoadBalancerType","registerLoadBalancerType","createChildChannelControlHelper","parent","overrides","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","createSubchannel","bind","updateState","requestReresolution","addChannelzChild","removeChannelzChild","registeredLoadBalancerTypes","defaultLoadBalancerType","typeName","loadBalancerType","loadBalancingConfigType","LoadBalancer","LoadBalancingConfig","config","channelControlHelper","getLoadBalancerName","configs","fallbackTodefault","obj","Error","keys","length","createFromJson"],"sources":["/Users/dimitris.finas/git/lightstep/cloud/aws/angular/angular-tutorial/node_modules/@grpc/grpc-js/build/src/load-balancer.js"],"sourcesContent":["\"use strict\";\n/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateLoadBalancingConfig = exports.getFirstUsableConfig = exports.isLoadBalancerNameRegistered = exports.createLoadBalancer = exports.registerDefaultLoadBalancerType = exports.registerLoadBalancerType = exports.createChildChannelControlHelper = void 0;\n/**\n * Create a child ChannelControlHelper that overrides some methods of the\n * parent while letting others pass through to the parent unmodified. This\n * allows other code to create these children without needing to know about\n * all of the methods to be passed through.\n * @param parent\n * @param overrides\n */\nfunction createChildChannelControlHelper(parent, overrides) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    return {\n        createSubchannel: (_b = (_a = overrides.createSubchannel) === null || _a === void 0 ? void 0 : _a.bind(overrides)) !== null && _b !== void 0 ? _b : parent.createSubchannel.bind(parent),\n        updateState: (_d = (_c = overrides.updateState) === null || _c === void 0 ? void 0 : _c.bind(overrides)) !== null && _d !== void 0 ? _d : parent.updateState.bind(parent),\n        requestReresolution: (_f = (_e = overrides.requestReresolution) === null || _e === void 0 ? void 0 : _e.bind(overrides)) !== null && _f !== void 0 ? _f : parent.requestReresolution.bind(parent),\n        addChannelzChild: (_h = (_g = overrides.addChannelzChild) === null || _g === void 0 ? void 0 : _g.bind(overrides)) !== null && _h !== void 0 ? _h : parent.addChannelzChild.bind(parent),\n        removeChannelzChild: (_k = (_j = overrides.removeChannelzChild) === null || _j === void 0 ? void 0 : _j.bind(overrides)) !== null && _k !== void 0 ? _k : parent.removeChannelzChild.bind(parent)\n    };\n}\nexports.createChildChannelControlHelper = createChildChannelControlHelper;\nconst registeredLoadBalancerTypes = {};\nlet defaultLoadBalancerType = null;\nfunction registerLoadBalancerType(typeName, loadBalancerType, loadBalancingConfigType) {\n    registeredLoadBalancerTypes[typeName] = {\n        LoadBalancer: loadBalancerType,\n        LoadBalancingConfig: loadBalancingConfigType,\n    };\n}\nexports.registerLoadBalancerType = registerLoadBalancerType;\nfunction registerDefaultLoadBalancerType(typeName) {\n    defaultLoadBalancerType = typeName;\n}\nexports.registerDefaultLoadBalancerType = registerDefaultLoadBalancerType;\nfunction createLoadBalancer(config, channelControlHelper) {\n    const typeName = config.getLoadBalancerName();\n    if (typeName in registeredLoadBalancerTypes) {\n        return new registeredLoadBalancerTypes[typeName].LoadBalancer(channelControlHelper);\n    }\n    else {\n        return null;\n    }\n}\nexports.createLoadBalancer = createLoadBalancer;\nfunction isLoadBalancerNameRegistered(typeName) {\n    return typeName in registeredLoadBalancerTypes;\n}\nexports.isLoadBalancerNameRegistered = isLoadBalancerNameRegistered;\nfunction getFirstUsableConfig(configs, fallbackTodefault = false) {\n    for (const config of configs) {\n        if (config.getLoadBalancerName() in registeredLoadBalancerTypes) {\n            return config;\n        }\n    }\n    if (fallbackTodefault) {\n        if (defaultLoadBalancerType) {\n            return new registeredLoadBalancerTypes[defaultLoadBalancerType].LoadBalancingConfig();\n        }\n        else {\n            return null;\n        }\n    }\n    else {\n        return null;\n    }\n}\nexports.getFirstUsableConfig = getFirstUsableConfig;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction validateLoadBalancingConfig(obj) {\n    if (!(obj !== null && typeof obj === 'object')) {\n        throw new Error('Load balancing config must be an object');\n    }\n    const keys = Object.keys(obj);\n    if (keys.length !== 1) {\n        throw new Error('Provided load balancing config has multiple conflicting entries');\n    }\n    const typeName = keys[0];\n    if (typeName in registeredLoadBalancerTypes) {\n        return registeredLoadBalancerTypes[typeName].LoadBalancingConfig.createFromJson(obj[typeName]);\n    }\n    else {\n        throw new Error(`Unrecognized load balancing config name ${typeName}`);\n    }\n}\nexports.validateLoadBalancingConfig = validateLoadBalancingConfig;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}